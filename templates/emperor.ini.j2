# {{ ansible_managed }}

[uwsgi]

# try to autoload appropriate plugin if "unknown" option has been specified
autoload = true

# enable master process manager
master = true

# spawn 2 uWSGI emperor worker processes
workers = 2

# automatically kill workers on master's death
no-orphans = true

# place timestamps into log
log-date = true

# user identifier of uWSGI processes
uid = {{ uwsgi_user_group.name | default('www-data') }}

# group identifier of uWSGI processes
gid = {{ uwsgi_user_group.group | default('www-data') }}

# vassals directory
emperor = {{ uwsgi_vassal_path }}

emperor-tyrant = {{ uwsgi_emperor_tyrant | bool }}
{% if uwsgi_user_group.name != 'root' and uwsgi_emperor_tyrant | bool %}
cap = setgid,setuid
{% endif %}
